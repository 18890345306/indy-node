

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Transactions &mdash; Hyperledger Indy Node  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Code quality requirements guideline" href="write-code-guideline.html" />
    <link rel="prev" title="Setup iptables rules (recommended)" href="setup-iptables.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Hyperledger Indy Node
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="start-nodes.html">Create a Network and Start Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="add-node.html">Add Node to Existing Pool</a></li>
<li class="toctree-l1"><a class="reference internal" href="auth_rules.html">Current implemented rules in auth_map</a></li>
<li class="toctree-l1"><a class="reference internal" href="ci-cd.html">Continuous Integration / Delivery</a></li>
<li class="toctree-l1"><a class="reference internal" href="cluster-simulation.html">Running a Simulation of a Indy Cluster and Agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="helper-scripts.html">Helper Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="indy-file-structure-guideline.html">Indy File Folders Structure Guideline</a></li>
<li class="toctree-l1"><a class="reference internal" href="indy-running-locally.html">Indy – Running the Getting Started tutorial locally</a></li>
<li class="toctree-l1"><a class="reference internal" href="indy-running-locally.html#resetting-the-indy-environment">Resetting the Indy environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-monitoring-tools-for-stewards.html">Node Monitoring Tools for Stewards</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-state-diagnostic-tools.html">Node State Diagnostic Tools Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-state-diagnostic-tools.html#workflow">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="pool-upgrade.html">Pool Upgrade Guideline</a></li>
<li class="toctree-l1"><a class="reference internal" href="requests-new.html">Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup-dev.html">Dev Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup-iptables.html">Setup iptables rules (recommended)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Transactions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#general-information">General Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="#genesis-transactions">Genesis Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#common-structure">Common Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#domain-ledger">Domain Ledger</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nym">NYM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#attrib">ATTRIB</a></li>
<li class="toctree-l3"><a class="reference internal" href="#schema">SCHEMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="#claim-def">CLAIM_DEF</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pool-ledger">Pool Ledger</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#node">NODE</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#config-ledger">Config Ledger</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pool-upgrade">POOL_UPGRADE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#node-upgrade">NODE_UPGRADE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pool-config">POOL_CONFIG</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#action-transactions">Action Transactions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pool-restart">POOL_RESTART</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="write-code-guideline.html">Code quality requirements guideline</a></li>
<li class="toctree-l1"><a class="reference internal" href="1.3_to_1.4_migration_guide.html">List of breaking changes for migration from indy-node 1.3 to 1.4</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Hyperledger Indy Node</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Transactions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/transactions.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="transactions">
<span id="transactions"></span><h1>Transactions<a class="headerlink" href="#transactions" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference external" href="#general-information">General Information</a></li>
<li><a class="reference external" href="#genesis-transactions">Genesis Transactions</a></li>
<li><a class="reference external" href="#common-structure">Common Structure</a></li>
<li><a class="reference external" href="#domain-ledger">Domain Ledger</a><ul>
<li><a class="reference external" href="#nym">NYM</a></li>
<li><a class="reference external" href="#attrib">ATTRIB</a></li>
<li><a class="reference external" href="#schema">SCHEMA</a></li>
<li><a class="reference external" href="#claim_def">CLAIM_DEF</a></li>
</ul>
</li>
<li><a class="reference external" href="#pool-ledger">Pool Ledger</a><ul>
<li><a class="reference external" href="#node">NODE</a></li>
</ul>
</li>
<li><a class="reference external" href="#config-ledger">Config Ledger</a><ul>
<li><a class="reference external" href="#pool_upgrade">POOL_UPGRADE</a></li>
<li><a class="reference external" href="#node_upgrade">NODE_UPGRADE</a></li>
<li><a class="reference external" href="#pool_config">POOL_CONFIG</a></li>
</ul>
</li>
</ul>
<div class="section" id="general-information">
<span id="general-information"></span><h2>General Information<a class="headerlink" href="#general-information" title="Permalink to this headline">¶</a></h2>
<p>This doc is about supported transactions and their representation on the Ledger (that is, the internal one).
If you are interested in the format of a client’s request (both write and read), then have a look at <a class="reference internal" href="requests.html"><span class="doc">requests</span></a>.</p>
<ul class="simple">
<li>All transactions are stored in a distributed ledger (replicated on all nodes)</li>
<li>The ledger is based on a <a class="reference external" href="https://en.wikipedia.org/wiki/Merkle_tree">Merkle Tree</a></li>
<li>The ledger consists of two things:<ul>
<li>transactions log as a sequence of key-value pairs
where key is a sequence number of the transaction and value is the serialized transaction</li>
<li>merkle tree (where hashes for leaves and nodes are persisted)</li>
</ul>
</li>
<li>Each transaction has a sequence number (no gaps) - keys in transactions log</li>
<li>So, this can be considered a blockchain where each block’s size is equal to 1</li>
<li>There are multiple ledgers by default:<ul>
<li><em>pool ledger</em>: transactions related to pool/network configuration (listing all nodes, their keys and addresses)</li>
<li><em>config ledger</em>: transactions for pool configuration plus transactions related to pool upgrade</li>
<li><em>domain ledger</em>: all main domain and application specific transactions (including NYM transactions for DID)</li>
</ul>
</li>
<li>All transactions are serialized to MsgPack format</li>
<li>All transactions (both transaction log and merkle tree hash stores) are stored in a LevelDB</li>
<li>One can use the <code class="docutils literal notranslate"><span class="pre">read_ledger</span></code> script to get transactions for a specified ledger in a readable format (JSON)</li>
<li>See <a class="reference external" href="https://docs.google.com/spreadsheets/d/1TWXF7NtBjSOaUIBeIH77SyZnawfo91cJ_ns4TR-wsq4/edit#gid=0">roles and permissions</a> for a list of roles and they type of transactions they can create.</li>
</ul>
<p>Below you can find the format and description of all supported transactions.</p>
</div>
<div class="section" id="genesis-transactions">
<span id="genesis-transactions"></span><h2>Genesis Transactions<a class="headerlink" href="#genesis-transactions" title="Permalink to this headline">¶</a></h2>
<p>As Indy is a public <strong>permissioned</strong> blockchain, each ledger may have a number of pre-defined
transactions defining the initial pool and network.</p>
<ul class="simple">
<li>pool genesis transactions define initial trusted nodes in the pool</li>
<li>domain genesis transactions define initial trusted trustees and stewards</li>
</ul>
</div>
<div class="section" id="common-structure">
<span id="common-structure"></span><h2>Common Structure<a class="headerlink" href="#common-structure" title="Permalink to this headline">¶</a></h2>
<p>Each transaction has the following structure consisting of metadata values (common for all transaction types) and
transaction specific data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;ver&quot;</span><span class="p">:</span> <span class="o">&lt;...&gt;</span><span class="p">,</span>
    <span class="s2">&quot;txn&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="o">&lt;...&gt;</span><span class="p">,</span>
        <span class="s2">&quot;protocolVersion&quot;</span><span class="p">:</span> <span class="o">&lt;...&gt;</span><span class="p">,</span>
        
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;ver&quot;</span><span class="p">:</span> <span class="o">&lt;...&gt;</span><span class="p">,</span>
            <span class="o">&lt;</span><span class="n">txn</span><span class="o">-</span><span class="n">specific</span> <span class="n">fields</span><span class="o">&gt;</span>
        <span class="p">},</span>
        
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;reqId&quot;</span><span class="p">:</span> <span class="o">&lt;...&gt;</span><span class="p">,</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="o">&lt;...&gt;</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;txnMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;txnTime&quot;</span><span class="p">:</span> <span class="o">&lt;...&gt;</span><span class="p">,</span>
        <span class="s2">&quot;seqNo&quot;</span><span class="p">:</span> <span class="o">&lt;...&gt;</span><span class="p">,</span>  
        <span class="s2">&quot;txnId&quot;</span><span class="p">:</span> <span class="o">&lt;...&gt;</span>
    <span class="p">},</span>
    <span class="s2">&quot;reqSignature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="o">&lt;...&gt;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="o">&lt;...&gt;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="o">&lt;...&gt;</span>
        <span class="p">}]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">ver</span></code> (string):</p>
<p>Transaction version to be able to evolve content.
The content of all sub-fields may depend on this version.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">txn</span></code> (dict):</p>
<p>Transaction-specific payload (data)</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">type</span></code> (enum number as string):</p>
<p>Supported transaction types:</p>
<ul class="simple">
<li>NODE = 0</li>
<li>NYM = 1</li>
<li>ATTRIB = 100</li>
<li>SCHEMA = 101</li>
<li>CLAIM_DEF = 102</li>
<li>POOL_UPGRADE = 109</li>
<li>NODE_UPGRADE = 110</li>
<li>POOL_CONFIG = 111</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">protocolVersion</span></code> (integer; optional):</p>
<p>The version of client-to-node or node-to-node protocol. Each new version may introduce a new feature in requests/replies/data.
Since clients and different nodes may be at different versions, we need this field to support backward compatibility
between clients and nodes.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">data</span></code> (dict):</p>
<p>Transaction-specific data fields (see following sections for each transaction’s description).</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">metadata</span></code> (dict):</p>
<p>Metadata as came from the request.</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">from</span></code> (base58-encoded string):
Identifier (DID) of the transaction submitter (client who sent the transaction) as base58-encoded string
for 16 or 32 byte DID value.
It may differ from <code class="docutils literal notranslate"><span class="pre">did</span></code> field for some of transaction (for example NYM), where <code class="docutils literal notranslate"><span class="pre">did</span></code> is a
target identifier (for example, a newly created DID identifier).</p>
<p><em>Example</em>: <code class="docutils literal notranslate"><span class="pre">from</span></code> is a DID of a Trust Anchor creating a new DID, and <code class="docutils literal notranslate"><span class="pre">did</span></code> is a newly created DID.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">reqId</span></code> (integer):
Unique ID number of the request with transaction.</p>
</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">txnMetadata</span></code> (dict):</p>
<p>Metadata attached to the transaction.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">version</span></code> (integer):
Transaction version to be able to evolve <code class="docutils literal notranslate"><span class="pre">txnMetadata</span></code>.
The content of <code class="docutils literal notranslate"><span class="pre">txnMetadata</span></code> may depend on the version.</li>
<li><code class="docutils literal notranslate"><span class="pre">txnTime</span></code> (integer as POSIX timestamp):
The time when transaction was written to the Ledger as POSIX timestamp.</li>
<li><code class="docutils literal notranslate"><span class="pre">seqNo</span></code> (integer):
A unique sequence number of the transaction on Ledger</li>
<li><code class="docutils literal notranslate"><span class="pre">txnId</span></code> (string):
Txn ID as State Trie key (address or descriptive data). It must be unique within the ledger.</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">reqSignature</span></code> (dict):</p>
<p>Submitter’s signature over request with transaction (<code class="docutils literal notranslate"><span class="pre">txn</span></code> field).</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">type</span></code> (string enum):<ul>
<li>ED25519: ed25519 signature</li>
<li>ED25519_MULTI: ed25519 signature in multisig case.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">values</span></code> (list):<ul>
<li><code class="docutils literal notranslate"><span class="pre">from</span></code> (base58-encoded string):
Identifier (DID) of signer as base58-encoded string for 16 or 32 byte DID value.</li>
<li><code class="docutils literal notranslate"><span class="pre">value</span></code> (base58-encoded string):
signature value</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Please note that all these metadata fields may be absent for genesis transactions.</p>
</div>
<div class="section" id="domain-ledger">
<span id="domain-ledger"></span><h2>Domain Ledger<a class="headerlink" href="#domain-ledger" title="Permalink to this headline">¶</a></h2>
<div class="section" id="nym">
<span id="nym"></span><h3>NYM<a class="headerlink" href="#nym" title="Permalink to this headline">¶</a></h3>
<p>Creates a new NYM record for a specific user, trust anchor, steward or trustee.
Note that only trustees and stewards can create new trust anchors and a trustee can be created only by other trustees (see <a class="reference external" href="https://docs.google.com/spreadsheets/d/1TWXF7NtBjSOaUIBeIH77SyZnawfo91cJ_ns4TR-wsq4/edit#gid=0">roles</a>).</p>
<p>The transaction can be used for
creation of new DIDs, setting and rotation of verification key, setting and changing of roles.</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">dest</span></code> (base58-encoded string):</p>
<p>Target DID as base58-encoded string for 16 or 32 byte DID value.
It differs from the <code class="docutils literal notranslate"><span class="pre">from</span></code> metadata field, where <code class="docutils literal notranslate"><span class="pre">from</span></code> is the DID of the submitter.</p>
<p><em>Example</em>: <code class="docutils literal notranslate"><span class="pre">from</span></code> is a DID of a Trust Anchor creating a new DID, and <code class="docutils literal notranslate"><span class="pre">dest</span></code> is a newly created DID.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">role</span></code> (enum number as integer; optional):</p>
<p>Role of a user that the NYM record is being created for. One of the following values</p>
<ul class="simple">
<li>None (common USER)</li>
<li>0 (TRUSTEE)</li>
<li>2 (STEWARD)</li>
<li>101 (TRUST_ANCHOR)</li>
</ul>
<p>A TRUSTEE can change any Nym’s role to None, thus stopping it from making any further writes (see <a class="reference external" href="https://docs.google.com/spreadsheets/d/1TWXF7NtBjSOaUIBeIH77SyZnawfo91cJ_ns4TR-wsq4/edit#gid=0">roles</a>).</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">verkey</span></code> (base58-encoded string, possibly starting with “~”; optional):</p>
<p>Target verification key as base58-encoded string. It can start with “~”, which means that
it’s an abbreviated verkey and should be 16 bytes long when decoded, otherwise it’s a full verkey
which should be 32 bytes long when decoded. If not set, then either the target identifier
(<code class="docutils literal notranslate"><span class="pre">did</span></code>) is 32-bit cryptonym CID (this is deprecated), or this is a user under guardianship
(doesn’t own the identifier yet).
Verkey can be changed to “None” by owner, it means that this user goes back under guardianship.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">alias</span></code> (string; optional):</p>
<p>NYM’s alias.</p>
</li>
</ul>
<p>If there is no NYM transaction for the specified DID (<code class="docutils literal notranslate"><span class="pre">did</span></code>) yes, then this can be considered as the creation of a new DID.</p>
<p>If there is already a NYM transaction with the specified DID (<code class="docutils literal notranslate"><span class="pre">did</span></code>),  then this is is considered an update of that DID.
In this case we can specify only the values we would like to update. All unspecified values remain unchanged.
So, if key rotation needs to be performed, the owner of the DID needs to send a NYM request with
<code class="docutils literal notranslate"><span class="pre">did</span></code> and <code class="docutils literal notranslate"><span class="pre">verkey</span></code> only. <code class="docutils literal notranslate"><span class="pre">role</span></code> and <code class="docutils literal notranslate"><span class="pre">alias</span></code> will stay the same.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;ver&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;txn&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;protocolVersion&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;ver&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;dest&quot;</span><span class="p">:</span><span class="s2">&quot;GEzcdDLhCpGCYRHW82kjHd&quot;</span><span class="p">,</span>
            <span class="s2">&quot;verkey&quot;</span><span class="p">:</span><span class="s2">&quot;~HmUWn928bnFT6Ephf65YXv&quot;</span><span class="p">,</span>
            <span class="s2">&quot;role&quot;</span><span class="p">:</span><span class="mi">101</span><span class="p">,</span>
        <span class="p">},</span>
        
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;reqId&quot;</span><span class="p">:</span><span class="mi">1513945121191691</span><span class="p">,</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span><span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;txnMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;txnTime&quot;</span><span class="p">:</span><span class="mi">1513945121</span><span class="p">,</span>
        <span class="s2">&quot;seqNo&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;txnId&quot;</span><span class="p">:</span> <span class="s2">&quot;N22KY2Dyvmuu2PyyqSFKue|01&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;reqSignature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ED25519&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;4X3skpoEK2DRgZxQ9PwuEvCJpL8JHdQ8X4HDDFyztgqE15DM2ZnkvrAh9bQY16egVinZTzwHqznmnkaFM4jjyDgd&quot;</span>
        <span class="p">}]</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="attrib">
<span id="attrib"></span><h3>ATTRIB<a class="headerlink" href="#attrib" title="Permalink to this headline">¶</a></h3>
<p>Adds an attribute to a NYM record</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">dest</span></code> (base58-encoded string):</p>
<p>Target DID we set an attribute for as base58-encoded string for 16 or 32 byte DID value.
It differs from <code class="docutils literal notranslate"><span class="pre">from</span></code> metadata field, where <code class="docutils literal notranslate"><span class="pre">from</span></code> is the DID of the submitter.</p>
<p><em>Example</em>: <code class="docutils literal notranslate"><span class="pre">from</span></code> is a DID of a Trust Anchor setting an attribute for a DID, and <code class="docutils literal notranslate"><span class="pre">dest</span></code> is the DID we set an attribute for.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">raw</span></code> (sha256 hash string; mutually exclusive with <code class="docutils literal notranslate"><span class="pre">hash</span></code> and <code class="docutils literal notranslate"><span class="pre">enc</span></code>):</p>
<p>Hash of the raw attribute data.
Raw data is represented as JSON, where the key is the attribute name and the value is the attribute value.
The ledger only stores a hash of the raw data; the real (unhashed) raw data is stored in a separate
attribute store.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">hash</span></code> (sha256 hash string; mutually exclusive with <code class="docutils literal notranslate"><span class="pre">raw</span></code> and <code class="docutils literal notranslate"><span class="pre">enc</span></code>):</p>
<p>Hash of attribute data (as sent by the client).
The ledger stores this hash; nothing is stored in an attribute store.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">enc</span></code> (sha256 hash string; mutually exclusive with <code class="docutils literal notranslate"><span class="pre">raw</span></code> and <code class="docutils literal notranslate"><span class="pre">hash</span></code>):</p>
<p>Hash of encrypted attribute data.
The ledger contains the hash only; the real encrypted data is stored in a separate
attribute store.</p>
</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;ver&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;txn&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;100&quot;</span><span class="p">,</span>
        <span class="s2">&quot;protocolVersion&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;ver&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;dest&quot;</span><span class="p">:</span><span class="s2">&quot;GEzcdDLhCpGCYRHW82kjHd&quot;</span><span class="p">,</span>
            <span class="s2">&quot;raw&quot;</span><span class="p">:</span><span class="s2">&quot;3cba1e3cf23c8ce24b7e08171d823fbd9a4929aafd9f27516e30699d3a42026a&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;reqId&quot;</span><span class="p">:</span><span class="mi">1513945121191691</span><span class="p">,</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span><span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;txnMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;txnTime&quot;</span><span class="p">:</span><span class="mi">1513945121</span><span class="p">,</span>
        <span class="s2">&quot;seqNo&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  
        <span class="s2">&quot;txnId&quot;</span><span class="p">:</span> <span class="s2">&quot;N22KY2Dyvmuu2PyyqSFKue|02&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;reqSignature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ED25519&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;4X3skpoEK2DRgZxQ9PwuEvCJpL8JHdQ8X4HDDFyztgqE15DM2ZnkvrAh9bQY16egVinZTzwHqznmnkaFM4jjyDgd&quot;</span>
        <span class="p">}]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="schema">
<span id="schema"></span><h3>SCHEMA<a class="headerlink" href="#schema" title="Permalink to this headline">¶</a></h3>
<p>Adds a Claim’s schema.</p>
<p>It’s not possible to update an existing schema.
So, if the Schema needs to be evolved, a new Schema with a new version or new name needs to be created.</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">data</span></code> (dict):</p>
<p>Dictionary with Schema’s data:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">attr_names</span></code>: array of attribute name strings</li>
<li><code class="docutils literal notranslate"><span class="pre">name</span></code>: Schema’s name string</li>
<li><code class="docutils literal notranslate"><span class="pre">version</span></code>: Schema’s version string</li>
</ul>
</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;ver&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;txn&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="mi">101</span><span class="p">,</span>
        <span class="s2">&quot;protocolVersion&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;ver&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;attr_names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;undergrad&quot;</span><span class="p">,</span><span class="s2">&quot;last_name&quot;</span><span class="p">,</span><span class="s2">&quot;first_name&quot;</span><span class="p">,</span><span class="s2">&quot;birth_date&quot;</span><span class="p">,</span><span class="s2">&quot;postgrad&quot;</span><span class="p">,</span><span class="s2">&quot;expiry_date&quot;</span><span class="p">],</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;Degree&quot;</span><span class="p">,</span>
                <span class="s2">&quot;version&quot;</span><span class="p">:</span><span class="s2">&quot;1.0&quot;</span>
            <span class="p">},</span>
        <span class="p">},</span>
        
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;reqId&quot;</span><span class="p">:</span><span class="mi">1513945121191691</span><span class="p">,</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span><span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;txnMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;txnTime&quot;</span><span class="p">:</span><span class="mi">1513945121</span><span class="p">,</span>
        <span class="s2">&quot;seqNo&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  
        <span class="s2">&quot;txnId&quot;</span><span class="p">:</span><span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf1|Degree|1.0&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;reqSignature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ED25519&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;4X3skpoEK2DRgZxQ9PwuEvCJpL8JHdQ8X4HDDFyztgqE15DM2ZnkvrAh9bQY16egVinZTzwHqznmnkaFM4jjyDgd&quot;</span>
        <span class="p">}]</span>
    <span class="p">}</span>
   
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="claim-def">
<span id="claim-def"></span><h3>CLAIM_DEF<a class="headerlink" href="#claim-def" title="Permalink to this headline">¶</a></h3>
<p>Adds a claim definition (in particular, public key), that Issuer creates and publishes for a particular claim schema.</p>
<p>It’s not possible to update <code class="docutils literal notranslate"><span class="pre">data</span></code> in an existing claim definition.
Therefore if an existing claim defintion needs to be evolved (for example, a key needs to be rotated), a new claim definition needs to be created for a new Issuer DID (<code class="docutils literal notranslate"><span class="pre">did</span></code>).</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">data</span></code> (dict):</p>
<p>Dictionary with claim definition’s data:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">primary</span></code> (dict): primary claim public key</li>
<li><code class="docutils literal notranslate"><span class="pre">revocation</span></code> (dict): revocation claim public key</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">ref</span></code> (string):</p>
<p>Sequence number of a schema transaction the claim definition is created for.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">signature_type</span></code> (string):</p>
<p>Type of the claim definition (that is claim signature). <code class="docutils literal notranslate"><span class="pre">CL</span></code> (Camenisch-Lysyanskaya) is the only supported type now.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">tag</span></code> (string, optional):</p>
<p>A unique tag to have multiple public keys for the same Schema and type issued by the same DID.
A default tag <code class="docutils literal notranslate"><span class="pre">tag</span></code> will be used if not specified.</p>
</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;ver&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;txn&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="mi">102</span><span class="p">,</span>
        <span class="s2">&quot;protocolVersion&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;ver&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;primary&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="o">...</span>
                <span class="p">},</span>
                <span class="s2">&quot;revocation&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="o">...</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">&quot;ref&quot;</span><span class="p">:</span><span class="mi">12</span><span class="p">,</span>
            <span class="s2">&quot;signature_type&quot;</span><span class="p">:</span><span class="s2">&quot;CL&quot;</span><span class="p">,</span>
            <span class="s1">&#39;tag&#39;</span><span class="p">:</span> <span class="s1">&#39;some_tag&#39;</span>
        <span class="p">},</span>
        
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;reqId&quot;</span><span class="p">:</span><span class="mi">1513945121191691</span><span class="p">,</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span><span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;txnMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;txnTime&quot;</span><span class="p">:</span><span class="mi">1513945121</span><span class="p">,</span>
        <span class="s2">&quot;seqNo&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  
        <span class="s2">&quot;txnId&quot;</span><span class="p">:</span><span class="s2">&quot;HHAD5g65TDQr1PPHHRoiGf2L5AD5g65TDQr1PPHHRoiGf1|Degree1|CL|key1&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;reqSignature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ED25519&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;4X3skpoEK2DRgZxQ9PwuEvCJpL8JHdQ8X4HDDFyztgqE15DM2ZnkvrAh9bQY16egVinZTzwHqznmnkaFM4jjyDgd&quot;</span>
        <span class="p">}]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pool-ledger">
<span id="pool-ledger"></span><h2>Pool Ledger<a class="headerlink" href="#pool-ledger" title="Permalink to this headline">¶</a></h2>
<div class="section" id="node">
<span id="node"></span><h3>NODE<a class="headerlink" href="#node" title="Permalink to this headline">¶</a></h3>
<p>Adds a new node to the pool or updates an existing node in the pool</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">data</span></code> (dict):</p>
<p>Data associated with the Node:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">alias</span></code> (string): Node’s alias</li>
<li><code class="docutils literal notranslate"><span class="pre">blskey</span></code> (base58-encoded string; optional): BLS multi-signature key as base58-encoded string (it’s needed for BLS signatures and state proofs support)</li>
<li><code class="docutils literal notranslate"><span class="pre">client_ip</span></code> (string; optional): Node’s client listener IP address, that is the IP clients use to connect to the node when sending read and write requests (ZMQ with TCP)</li>
<li><code class="docutils literal notranslate"><span class="pre">client_port</span></code> (string; optional): Node’s client listener port, that is the port clients use to connect to the node when sending read and write requests (ZMQ with TCP)</li>
<li><code class="docutils literal notranslate"><span class="pre">node_ip</span></code> (string; optional): The IP address other Nodes use to communicate with this Node; no clients are allowed here (ZMQ with TCP)</li>
<li><code class="docutils literal notranslate"><span class="pre">node_port</span></code> (string; optional): The port other Nodes use to communicate with this Node; no clients are allowed here (ZMQ with TCP)</li>
<li><code class="docutils literal notranslate"><span class="pre">services</span></code> (array of strings; optional): the service of the Node. <code class="docutils literal notranslate"><span class="pre">VALIDATOR</span></code> is the only supported one now.</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">dest</span></code> (base58-encoded string):</p>
<p>Target Node’s DID as base58-encoded string for 16 or 32 byte DID value.
It differs from <code class="docutils literal notranslate"><span class="pre">identifier</span></code> metadata field, where <code class="docutils literal notranslate"><span class="pre">identifier</span></code> is the DID of the transaction submitter (Steward’s DID).</p>
<p><em>Example</em>: <code class="docutils literal notranslate"><span class="pre">identifier</span></code> is a DID of a Steward creating a new Node, and <code class="docutils literal notranslate"><span class="pre">dest</span></code> is the DID of this Node.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">verkey</span></code> (base58-encoded string, possibly starting with “~”; optional):</p>
<p>Target Node verification key as base58-encoded string.
It may absent if <code class="docutils literal notranslate"><span class="pre">dest</span></code> is 32-bit cryptonym CID.</p>
</li>
</ul>
<p>If there is no NODE transaction with the specified Node ID (<code class="docutils literal notranslate"><span class="pre">dest</span></code>), then it can be considered as creation of a new NODE.</p>
<p>If there is a NODE transaction with the specified Node ID (<code class="docutils literal notranslate"><span class="pre">dest</span></code>), then this is update of existing NODE.
In this case we can specify only the values we would like to override. All unspecified values remain the same.
So, if a Steward wants to rotate BLS key, then it’s sufficient to send a NODE transaction with <code class="docutils literal notranslate"><span class="pre">dest</span></code> and a new <code class="docutils literal notranslate"><span class="pre">blskey</span></code>.
There is no need to specify all other fields, and they will remain the same.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;ver&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;txn&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;protocolVersion&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;alias&quot;</span><span class="p">:</span><span class="s2">&quot;Delta&quot;</span><span class="p">,</span>
                <span class="s2">&quot;blskey&quot;</span><span class="p">:</span><span class="s2">&quot;4kkk7y7NQVzcfvY4SAe1HBMYnFohAJ2ygLeJd3nC77SFv2mJAmebH3BGbrGPHamLZMAFWQJNHEM81P62RfZjnb5SER6cQk1MNMeQCR3GVbEXDQRhhMQj2KqfHNFvDajrdQtyppc4MZ58r6QeiYH3R68mGSWbiWwmPZuiqgbSdSmweqc&quot;</span><span class="p">,</span>
                <span class="s2">&quot;client_ip&quot;</span><span class="p">:</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;client_port&quot;</span><span class="p">:</span><span class="mi">7407</span><span class="p">,</span>
                <span class="s2">&quot;node_ip&quot;</span><span class="p">:</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;node_port&quot;</span><span class="p">:</span><span class="mi">7406</span><span class="p">,</span>
                <span class="s2">&quot;services&quot;</span><span class="p">:[</span><span class="s2">&quot;VALIDATOR&quot;</span><span class="p">]</span>
            <span class="p">},</span>
            <span class="s2">&quot;dest&quot;</span><span class="p">:</span><span class="s2">&quot;4yC546FFzorLPgTNTc6V43DnpFrR8uHvtunBxb2Suaa2&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;reqId&quot;</span><span class="p">:</span><span class="mi">1513945121191691</span><span class="p">,</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span><span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;txnMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;txnTime&quot;</span><span class="p">:</span><span class="mi">1513945121</span><span class="p">,</span>
        <span class="s2">&quot;seqNo&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  
        <span class="s2">&quot;txnId&quot;</span><span class="p">:</span><span class="s2">&quot;Delta&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;reqSignature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ED25519&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;4X3skpoEK2DRgZxQ9PwuEvCJpL8JHdQ8X4HDDFyztgqE15DM2ZnkvrAh9bQY16egVinZTzwHqznmnkaFM4jjyDgd&quot;</span>
        <span class="p">}]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="config-ledger">
<span id="config-ledger"></span><h2>Config Ledger<a class="headerlink" href="#config-ledger" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pool-upgrade">
<span id="pool-upgrade"></span><h3>POOL_UPGRADE<a class="headerlink" href="#pool-upgrade" title="Permalink to this headline">¶</a></h3>
<p>Command to upgrade the Pool (sent by Trustee). It upgrades the specified Nodes (either all nodes in the Pool, or some specific ones).</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">name</span></code> (string):</p>
<p>Human-readable name for the upgrade.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">action</span></code> (enum: <code class="docutils literal notranslate"><span class="pre">start</span></code> or <code class="docutils literal notranslate"><span class="pre">cancel</span></code>):</p>
<p>Starts or cancels the Upgrade.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">version</span></code> (string):</p>
<p>The version of indy-node package we perform upgrade to.
Must be greater than existing one (or equal if <code class="docutils literal notranslate"><span class="pre">reinstall</span></code> flag is True).</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">schedule</span></code> (dict of node DIDs to timestamps):</p>
<p>Schedule of when to perform upgrade on each node. This is a map where Node DIDs are keys, and upgrade time is a value (see example below).
If <code class="docutils literal notranslate"><span class="pre">force</span></code> flag is False, then it’s required that time difference between each Upgrade must be not less than 5 minutes
(to give each Node enough time and not make the whole Pool go down during Upgrade).</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">sha256</span></code> (sha256 hash string):</p>
<p>sha256 hash of the package</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">force</span></code> (boolean; optional):</p>
<p>Whether we should apply transaction (schedule Upgrade) without waiting for consensus
of this transaction.
If false, then transaction is applied only after it’s written to the ledger.
Otherwise it’s applied regardless of result of consensus, and there are no restrictions on the Upgrade <code class="docutils literal notranslate"><span class="pre">schedule</span></code> for each Node.
So, we can Upgrade the whole Pool at the same time when it’s set to True.False by default. Avoid setting to True without good reason.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">reinstall</span></code> (boolean; optional):</p>
<p>Whether it’s allowed to re-install the same version.
False by default.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">timeout</span></code> (integer; optional):</p>
<p>Limits upgrade time on each Node.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">justification</span></code> (string; optional):</p>
<p>Optional justification string for this particular Upgrade.</p>
</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;ver&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;txn&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="mi">109</span><span class="p">,</span>
        <span class="s2">&quot;protocolVersion&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;ver&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;upgrade-13&quot;</span><span class="p">,</span>
            <span class="s2">&quot;action&quot;</span><span class="p">:</span><span class="s2">&quot;start&quot;</span><span class="p">,</span>
            <span class="s2">&quot;version&quot;</span><span class="p">:</span><span class="s2">&quot;1.3&quot;</span><span class="p">,</span>
            <span class="s2">&quot;schedule&quot;</span><span class="p">:{</span><span class="s2">&quot;4yC546FFzorLPgTNTc6V43DnpFrR8uHvtunBxb2Suaa2&quot;</span><span class="p">:</span><span class="s2">&quot;2017-12-25T10:25:58.271857+00:00&quot;</span><span class="p">,</span><span class="s2">&quot;AtDfpKFe1RPgcr5nnYBw1Wxkgyn8Zjyh5MzFoEUTeoV3&quot;</span><span class="p">:</span><span class="s2">&quot;2017-12-25T10:26:16.271857+00:00&quot;</span><span class="p">,</span><span class="s2">&quot;DG5M4zFm33Shrhjj6JB7nmx9BoNJUq219UXDfvwBDPe2&quot;</span><span class="p">:</span><span class="s2">&quot;2017-12-25T10:26:25.271857+00:00&quot;</span><span class="p">,</span><span class="s2">&quot;JpYerf4CssDrH76z7jyQPJLnZ1vwYgvKbvcp16AB5RQ&quot;</span><span class="p">:</span><span class="s2">&quot;2017-12-25T10:26:07.271857+00:00&quot;</span><span class="p">},</span>
            <span class="s2">&quot;sha256&quot;</span><span class="p">:</span><span class="s2">&quot;db34a72a90d026dae49c3b3f0436c8d3963476c77468ad955845a1ccf7b03f55&quot;</span><span class="p">,</span>
            <span class="s2">&quot;force&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;reinstall&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;timeout&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;justification&quot;</span><span class="p">:</span><span class="n">null</span><span class="p">,</span>
        <span class="p">},</span>
        
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;reqId&quot;</span><span class="p">:</span><span class="mi">1513945121191691</span><span class="p">,</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span><span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
            <span class="s2">&quot;txnId&quot;</span><span class="p">:</span><span class="s2">&quot;upgrade-13&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;txnMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;txnTime&quot;</span><span class="p">:</span><span class="mi">1513945121</span><span class="p">,</span>
        <span class="s2">&quot;seqNo&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  
    <span class="p">},</span>
    <span class="s2">&quot;reqSignature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ED25519&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;4X3skpoEK2DRgZxQ9PwuEvCJpL8JHdQ8X4HDDFyztgqE15DM2ZnkvrAh9bQY16egVinZTzwHqznmnkaFM4jjyDgd&quot;</span>
        <span class="p">}]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="node-upgrade">
<span id="node-upgrade"></span><h3>NODE_UPGRADE<a class="headerlink" href="#node-upgrade" title="Permalink to this headline">¶</a></h3>
<p>Status of each Node’s upgrade (sent by each upgraded Node)</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">action</span></code> (enum string):</p>
<p>One of <code class="docutils literal notranslate"><span class="pre">in_progress</span></code>, <code class="docutils literal notranslate"><span class="pre">complete</span></code> or <code class="docutils literal notranslate"><span class="pre">fail</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">version</span></code> (string):</p>
<p>The version of indy-node the node was upgraded to.</p>
</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;ver&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;txn&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="mi">110</span><span class="p">,</span>
        <span class="s2">&quot;protocolVersion&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;ver&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;action&quot;</span><span class="p">:</span><span class="s2">&quot;complete&quot;</span><span class="p">,</span>
            <span class="s2">&quot;version&quot;</span><span class="p">:</span><span class="s2">&quot;1.2&quot;</span>
        <span class="p">},</span>
        
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;reqId&quot;</span><span class="p">:</span><span class="mi">1513945121191691</span><span class="p">,</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span><span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;txnMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;txnTime&quot;</span><span class="p">:</span><span class="mi">1513945121</span><span class="p">,</span>
        <span class="s2">&quot;seqNo&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  
        <span class="s2">&quot;txnId&quot;</span><span class="p">:</span><span class="s2">&quot;upgrade-13&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;reqSignature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ED25519&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;4X3skpoEK2DRgZxQ9PwuEvCJpL8JHdQ8X4HDDFyztgqE15DM2ZnkvrAh9bQY16egVinZTzwHqznmnkaFM4jjyDgd&quot;</span>
        <span class="p">}]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="pool-config">
<span id="pool-config"></span><h3>POOL_CONFIG<a class="headerlink" href="#pool-config" title="Permalink to this headline">¶</a></h3>
<p>Command to change Pool’s configuration</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">writes</span></code> (boolean):</p>
<p>Whether any write requests can be processed by the pool (if false, then pool goes to read-only state).
True by default.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">force</span></code> (boolean; optional):</p>
<p>Whether we should apply transaction (for example, move pool to read-only state) without waiting for consensus
of this transaction.
If false, then transaction is applied only after it’s written to the ledger.
Otherwise it’s applied regardless of result of consensus.False by default. Avoid setting to True without good reason.</p>
</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;ver&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;txn&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="mi">111</span><span class="p">,</span>
        <span class="s2">&quot;protocolVersion&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;ver&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;writes&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;force&quot;</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
        <span class="p">},</span>
        
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;reqId&quot;</span><span class="p">:</span><span class="mi">1513945121191691</span><span class="p">,</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span><span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;txnMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;txnTime&quot;</span><span class="p">:</span><span class="mi">1513945121</span><span class="p">,</span>
        <span class="s2">&quot;seqNo&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  
        <span class="s2">&quot;txnId&quot;</span><span class="p">:</span><span class="s2">&quot;1111&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;reqSignature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ED25519&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="s2">&quot;L5AD5g65TDQr1PPHHRoiGf&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;4X3skpoEK2DRgZxQ9PwuEvCJpL8JHdQ8X4HDDFyztgqE15DM2ZnkvrAh9bQY16egVinZTzwHqznmnkaFM4jjyDgd&quot;</span>
        <span class="p">}]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="action-transactions">
<span id="action-transactions"></span><h2>Action Transactions<a class="headerlink" href="#action-transactions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pool-restart">
<span id="pool-restart"></span><h3>POOL_RESTART<a class="headerlink" href="#pool-restart" title="Permalink to this headline">¶</a></h3>
<p>POOL_RESTART is the command to restart all nodes at the time specified in field “datetime”(sent by Trustee).</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">datetime</span></code> (string):</p>
<p>Restart time in datetime frmat/
To restart as early as possible, send message without the “datetime” field or put in it value “0” or “”(empty string) or the past date on this place.
The restart is performed immediately and there is no guarantee of receiving an answer with Reply.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">action</span></code> (enum: <code class="docutils literal notranslate"><span class="pre">start</span></code> or <code class="docutils literal notranslate"><span class="pre">cancel</span></code>):</p>
<p>Starts or cancels the Restart.</p>
</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="s2">&quot;reqId&quot;</span><span class="p">:</span> <span class="mi">98262</span><span class="p">,</span>
     <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;118&quot;</span><span class="p">,</span>
     <span class="s2">&quot;identifier&quot;</span><span class="p">:</span> <span class="s2">&quot;M9BJDuS24bqbJNvBRsoGg3&quot;</span><span class="p">,</span>
     <span class="s2">&quot;datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-03-29T15:38:34.464106+00:00&quot;</span><span class="p">,</span>
     <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;start&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="write-code-guideline.html" class="btn btn-neutral float-right" title="Code quality requirements guideline" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="setup-iptables.html" class="btn btn-neutral" title="Setup iptables rules (recommended)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Hyperledger

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>