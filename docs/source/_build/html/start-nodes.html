

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Create a Network and Start Nodes &mdash; Hyperledger Indy Node  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Add Node to Existing Pool" href="add-node.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Hyperledger Indy Node
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Create a Network and Start Nodes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#scripts-for-initialization">Scripts for Initialization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generating-keys">Generating keys</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#for-deb-installation">For deb installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#for-pip-installation">For pip installation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#generating-keys-and-test-genesis-transaction-files-for-a-test-network">Generating keys and test genesis transaction files for a test network</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-iptables-recommended">Setup iptables (recommended)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-node">Running Node</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#local-test-network-example">Local Test Network Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#remote-test-network-example">Remote Test Network Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="add-node.html">Add Node to Existing Pool</a></li>
<li class="toctree-l1"><a class="reference internal" href="ci-cd.html">Continuous Integration / Delivery</a></li>
<li class="toctree-l1"><a class="reference internal" href="cluster-simulation.html">Running a Simulation of a Indy Cluster and Agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="helper-scripts.html">Helper Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="indy-file-structure-guideline.html">Indy File Folders Structure Guideline</a></li>
<li class="toctree-l1"><a class="reference internal" href="indy-running-locally.html">Indy – Running the Getting Started tutorial locally</a></li>
<li class="toctree-l1"><a class="reference internal" href="indy-running-locally.html#resetting-the-indy-environment">Resetting the Indy environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-monitoring-tools-for-stewards.html">Node Monitoring Tools for Stewards</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-state-diagnostic-tools.html">Node State Diagnostic Tools Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-state-diagnostic-tools.html#workflow">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="pool-upgrade.html">Pool Upgrade Guideline</a></li>
<li class="toctree-l1"><a class="reference internal" href="requests-new.html">Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup-dev.html">Dev Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup-iptables.html">Setup iptables rules (recommended)</a></li>
<li class="toctree-l1"><a class="reference internal" href="transactions.html">Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="write-code-guideline.html">Code quality requirements guideline</a></li>
<li class="toctree-l1"><a class="reference internal" href="1.3_to_1.4_migration_guide.html">List of breaking changes for migration from indy-node 1.3 to 1.4</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Hyperledger Indy Node</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Create a Network and Start Nodes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/start-nodes.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="create-a-network-and-start-nodes">
<span id="create-a-network-and-start-nodes"></span><h1>Create a Network and Start Nodes<a class="headerlink" href="#create-a-network-and-start-nodes" title="Permalink to this headline">¶</a></h1>
<p>In order to run your own Network, you need to do the following for each Node:</p>
<ol>
<li><p class="first">Install Indy Node</p>
<ul class="simple">
<li>A recommended way for ubuntu is installing from deb packages</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">key</span> <span class="n">adv</span> <span class="o">--</span><span class="n">keyserver</span> <span class="n">keyserver</span><span class="o">.</span><span class="n">ubuntu</span><span class="o">.</span><span class="n">com</span> <span class="o">--</span><span class="n">recv</span><span class="o">-</span><span class="n">keys</span> <span class="mi">68</span><span class="n">DB5E88</span>
<span class="n">sudo</span> <span class="n">echo</span> <span class="s2">&quot;deb https://repo.sovrin.org/deb xenial stable&quot;</span> <span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">sources</span><span class="o">.</span><span class="n">list</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">indy</span><span class="o">-</span><span class="n">node</span>
</pre></div>
</div>
<ul class="simple">
<li>It’s also possible to install from pypi for test purposes<ul>
<li>master version: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">indy-node-dev</span></code></li>
<li>stable version: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">indy-node</span></code></li>
</ul>
</li>
</ul>
</li>
<li><p class="first">Initialize Node to be included into the Network</p>
<ul class="simple">
<li>if <code class="docutils literal notranslate"><span class="pre">indy-node</span></code> were installed from pypi basic directory structure should created manually with the command <code class="docutils literal notranslate"><span class="pre">create_dirs.sh</span></code></li>
<li>set Network name in config file<ul>
<li>the location of the config depends on how a Node was installed. It’s usually inside <code class="docutils literal notranslate"><span class="pre">/etc/indy</span></code> for Ubuntu.</li>
<li>the following needs to be added: <code class="docutils literal notranslate"><span class="pre">NETWORK_NAME={network_name}</span></code> where {network_name} matches the one in genesis transaction files above</li>
</ul>
</li>
<li>generate keys<ul>
<li>ed25519 transport keys (used by ZMQ for Node-to-Node and Node-to-Client communication)</li>
<li>BLS keys for BLS multi-signature and state proofs support</li>
</ul>
</li>
<li>provide genesis transactions files which will be a basis of initial Pool.<ul>
<li>pool transactions genesis file:<ul>
<li>The file must be named as <code class="docutils literal notranslate"><span class="pre">pool_transactions_genesis</span></code></li>
<li>The file contains initial set of Nodes a Pool is started from (initial set of NODE transactions in the Ledger)</li>
<li>New Nodes will be added by sending new NODE txn to be written into the Ledger</li>
<li>All new Nodes and Clients will use genesis transaction file to connect to initial set of Nodes,
and then catch-up all other NODE transactions to get up-to-date Ledger.</li>
<li>File must be located in <code class="docutils literal notranslate"><span class="pre">/var/lib/indy/{network_name}</span></code> folder</li>
</ul>
</li>
<li>domain transactions genesis file:<ul>
<li>The file must be named as <code class="docutils literal notranslate"><span class="pre">domain_transactions_genesis</span></code></li>
<li>The file contains initial NYM transactions (for example, Trustees, Stewards, etc.)</li>
<li>File must be located in <code class="docutils literal notranslate"><span class="pre">/var/lib/indy/{network_name}</span></code> folder</li>
</ul>
</li>
</ul>
</li>
<li>configure iptables to limit the number of simultaneous clients connections (recommended)</li>
</ul>
</li>
</ol>
<div class="section" id="scripts-for-initialization">
<span id="scripts-for-initialization"></span><h2>Scripts for Initialization<a class="headerlink" href="#scripts-for-initialization" title="Permalink to this headline">¶</a></h2>
<p>There are a number of scripts which can help in generation of keys and running a test network.</p>
<div class="section" id="generating-keys">
<span id="generating-keys"></span><h3>Generating keys<a class="headerlink" href="#generating-keys" title="Permalink to this headline">¶</a></h3>
<div class="section" id="for-deb-installation">
<span id="for-deb-installation"></span><h4>For deb installation<a class="headerlink" href="#for-deb-installation" title="Permalink to this headline">¶</a></h4>
<p>The following script should be used to generate both ed25519 and BLS keys for a node named <code class="docutils literal notranslate"><span class="pre">Alpha</span></code> with node port <code class="docutils literal notranslate"><span class="pre">9701</span></code> and client port <code class="docutils literal notranslate"><span class="pre">9702</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">init_indy_node</span> <span class="n">Alpha</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9701</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9702</span> <span class="p">[</span><span class="o">--</span><span class="n">seed</span> <span class="mi">111111111111111111111111111</span><span class="n">Alpha</span><span class="p">]</span>
</pre></div>
</div>
<p>Also this script generates indy-node environment file needed for systemd service config and indy-node iptables setup script.</p>
</div>
<div class="section" id="for-pip-installation">
<span id="for-pip-installation"></span><h4>For pip installation<a class="headerlink" href="#for-pip-installation" title="Permalink to this headline">¶</a></h4>
<p>The following script can generate both ed25519 and BLS keys for a node named <code class="docutils literal notranslate"><span class="pre">Alpha</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">init_indy_keys</span> <span class="o">--</span><span class="n">name</span> <span class="n">Alpha</span> <span class="p">[</span><span class="o">--</span><span class="n">seed</span> <span class="mi">111111111111111111111111111</span><span class="n">Alpha</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">force</span><span class="p">]</span>
</pre></div>
</div>
<p>Note: Seed can be any randomly chosen 32 byte value. It does not have to be in the format 11..<name of the node></p>
<p>Please note that these scripts must be called <em>after</em> CURRENT_NETWORK is set in config (see above).</p>
</div>
</div>
<div class="section" id="generating-keys-and-test-genesis-transaction-files-for-a-test-network">
<span id="generating-keys-and-test-genesis-transaction-files-for-a-test-network"></span><h3>Generating keys and test genesis transaction files for a test network<a class="headerlink" href="#generating-keys-and-test-genesis-transaction-files-for-a-test-network" title="Permalink to this headline">¶</a></h3>
<p>There is a script that can generate keys and corresponding test genesis files to be used with a Test network.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>~$ generate_indy_pool_transactions --nodes 4 --clients 5 --nodeNum 1 [--ips &#39;191.177.76.26,22.185.194.102,247.81.153.79,93.125.199.45&#39;] [--network=sandbox]
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">--nodes</span></code> specifies a total number of nodes in the pool</li>
<li><code class="docutils literal notranslate"><span class="pre">--clients</span></code> specifies a number of pre-configured clients in the pool (in <code class="docutils literal notranslate"><span class="pre">domain_transactions_file_{network_name}_genesis</span></code>)</li>
<li><code class="docutils literal notranslate"><span class="pre">--nodeNum</span></code> specifies a number of this particular node (from 1 to <code class="docutils literal notranslate"><span class="pre">-nodes</span></code> value), that is a number of the Node to create private keys locally for</li>
<li><code class="docutils literal notranslate"><span class="pre">--ip</span></code> specifies IP addresses for all nodes in the pool (if not specified, then <code class="docutils literal notranslate"><span class="pre">localhost</span></code> is used)</li>
<li><code class="docutils literal notranslate"><span class="pre">--network</span></code> specifies a Network generate transaction files and keys for. <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> is used by default</li>
</ul>
<p>We can run the script multiple times for different networks.</p>
</div>
<div class="section" id="setup-iptables-recommended">
<span id="setup-iptables-recommended"></span><h3>Setup iptables (recommended)<a class="headerlink" href="#setup-iptables-recommended" title="Permalink to this headline">¶</a></h3>
<p>Instructions related to iptables setup can be found <a class="reference external" href="https://github.com/hyperledger/indy-node/blob/master/docs/setup-iptables.md">here</a>.</p>
</div>
<div class="section" id="running-node">
<span id="running-node"></span><h3>Running Node<a class="headerlink" href="#running-node" title="Permalink to this headline">¶</a></h3>
<p>The following script will start a Node process which can communicate with other Nodes and Clients:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start_indy_node</span> <span class="n">Alpha</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9701</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9702</span>
</pre></div>
</div>
<p>The node uses separate TCP channels for communicating with nodes and clients.
The first IP/port pair is for the node-to-node communication channel and the second IP/port pair is for node-to-client communication channel.
IP addresses may be changed according to hardware configuration.
Different IP addresses for node-to-node and node-to-client communication may be used.</p>
</div>
</div>
<div class="section" id="local-test-network-example">
<span id="local-test-network-example"></span><h2>Local Test Network Example<a class="headerlink" href="#local-test-network-example" title="Permalink to this headline">¶</a></h2>
<p>If you want to try out an Indy cluster of 4 nodes with the nodes running on your local machine, then you can do the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>~$ generate_indy_pool_transactions --nodes 4 --clients 5 --nodeNum 1 2 3 4
By default node with the name Node1 will use ports 9701 and 9702 for nodestack and clientstack respectively
Node2 will use ports 9703 and 9704 for nodestack and clientstack respectively
Node3 will use ports 9705 and 9706 for nodestack and clientstack respectively
Node4 will use ports 9707 and 9708 for nodestack and clientstack respectively
</pre></div>
</div>
<p>Now you can run the 4 nodes as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start_indy_node</span> <span class="n">Node1</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9701</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9702</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start_indy_node</span> <span class="n">Node2</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9703</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9704</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start_indy_node</span> <span class="n">Node3</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9705</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9706</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start_indy_node</span> <span class="n">Node4</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9707</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9708</span>
</pre></div>
</div>
</div>
<div class="section" id="remote-test-network-example">
<span id="remote-test-network-example"></span><h2>Remote Test Network Example<a class="headerlink" href="#remote-test-network-example" title="Permalink to this headline">¶</a></h2>
<p>Now let’s say you want to run 4 nodes on 4 different machines as</p>
<ol class="simple">
<li>Node1 running on 191.177.76.26</li>
<li>Node2 running on 22.185.194.102</li>
<li>Node3 running on 247.81.153.79</li>
<li>Node4 running on 93.125.199.45</li>
</ol>
<p>On machine with IP 191.177.76.26 you will run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>~$ generate_indy_pool_transactions --nodes 4 --clients 5 --nodeNum 1 --ips &#39;191.177.76.26,22.185.194.102,247.81.153.79,93.125.199.45&#39;
This node with name Node1 will use ports 9701 and 9702 for nodestack and clientstack respectively
</pre></div>
</div>
<p>On machine with IP 22.185.194.102 you will run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>~$ generate_indy_pool_transactions --nodes 4 --clients 5 --nodeNum 2 --ips &#39;191.177.76.26,22.185.194.102,247.81.153.79,93.125.199.45&#39;
This node with name Node2 will use ports 9703 and 9704 for nodestack and clientstack respectively
</pre></div>
</div>
<p>On machine with IP 247.81.153.79 you will run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>~$ generate_indy_pool_transactions --nodes 4 --clients 5 --nodeNum 3 --ips &#39;191.177.76.26,22.185.194.102,247.81.153.79,93.125.199.45&#39;
This node with name Node3 will use ports 9705 and 9706 for nodestack and clientstack respectively
</pre></div>
</div>
<p>On machine with IP 93.125.199.45 you will run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>~$ generate_indy_pool_transactions --nodes 4 --clients 5 --nodeNum 4 --ips &#39;191.177.76.26,22.185.194.102,247.81.153.79,93.125.199.45&#39;
This node with name Node4 will use ports 9707 and 9708 for nodestack and clientstack respectively
</pre></div>
</div>
<p>Now you can run the 4 nodes as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start_indy_node</span> <span class="n">Node1</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9701</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9702</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start_indy_node</span> <span class="n">Node2</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9703</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9704</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start_indy_node</span> <span class="n">Node3</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9705</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9706</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start_indy_node</span> <span class="n">Node4</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9707</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mi">9708</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="add-node.html" class="btn btn-neutral float-right" title="Add Node to Existing Pool" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Hyperledger

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>